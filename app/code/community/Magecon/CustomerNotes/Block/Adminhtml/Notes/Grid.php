<?php/** * Open Biz Ltd * * NOTICE OF LICENSE * * This source file is subject to the EULA * that is bundled with this package in the file OPEN-BIZ-LICENSE.txt. * It is also available through the world-wide-web at this URL: * http://mageconsult.net/terms-and-conditions * * @category   Magecon * @package    Magecon_CustomerNotes * @version    2.0.0 * @copyright  Copyright (c) 2013 Open Biz Ltd (http://www.mageconsult.net) * @license    http://mageconsult.net/terms-and-conditions */class Magecon_CustomerNotes_Block_Adminhtml_Notes_Grid extends Mage_Adminhtml_Block_Widget_Grid {    public function __construct() {        parent::__construct();        $this->setId('customernotes_grid');        $this->setUseAjax(true);        $this->setDefaultSort('creation_time');        $this->setDefaultDir('DESC');        $this->setSaveParametersInSession(true);    }    protected function _prepareCollection() {        $this->setCollection(Mage::getModel('customernotes/notes')->getCollection());        return parent::_prepareCollection();    }    protected function _prepareColumns() {        $this->addColumn('added_by', array(            'header' => Mage::helper('customernotes')->__('Added By'),            'width' => '7%',            'align' => 'left',            'sortable' => true,            'index' => 'username'        ));        $this->addColumn('customer', array(            'header' => Mage::helper('customernotes')->__('Customer Name'),            'sortable' => true,            'index' => 'customer_name'        ));        $this->addColumn('note', array(            'header' => Mage::helper('customernotes')->__('Note'),            'align' => 'left',            'sortable' => true,            'index' => 'note'        ));        $this->addColumn('creation_time', array(            'header' => Mage::helper('customernotes')->__('Date'),            'align' => 'center',            'type' => 'datetime',            'sortable' => true,            'index' => 'created_time'        ));        $this->addExportType('*/*/exportCsv', Mage::helper('customernotes')->__('CSV'));        $this->addExportType('*/*/exportExcel', Mage::helper('customernotes')->__('Excel XML'));                return parent::_prepareColumns();    }    public function getRowUrl($row) {        return $this->getUrl('adminhtml/customer/edit', array('id' => $row->getCustomerId()));    }    public function getGridUrl() {        return $this->getUrl('*/*/grid', array('_current' => true));    }}
var manufacturerList = {
	"01 Communique"		:	[
	{
		"ManufacturerID" 	: "10475",
		"ManufacturerCode"	: "CS"
	
	}
	],
	"ABBYY"		:	[
	{
		"ManufacturerID" 	: "104178",
		"ManufacturerCode"	: "AB"
	
	}
	],
	"AEC"		:	[
	{
		"ManufacturerID" 	: "10299",
		"ManufacturerCode"	: "AE"
	
	}
	],
	"Altima Technologies"		:	[
	{
		"ManufacturerID" 	: "10625",
		"ManufacturerCode"	: "AM"
	
	}
	],
	"Autodesk"		:	[
	{
		"ManufacturerID" 	: "10316",
		"ManufacturerCode"	: "AU"
	
	}
	],
	"Apple"		:	[
	{
		"ManufacturerID" 	: "102765",
		"ManufacturerCode"	: "AP"
	
	}
	],
	"Acronis"		:	[
	{
		"ManufacturerID" 	: "1020785",
		"ManufacturerCode"	: "AC"
	
	}
	],
	"Adobe"		:	[
	{
		"ManufacturerID" 	: "10297",
		"ManufacturerCode"	: "AD"
	
	}
	],
	"AVG"		:	[
	{
		"ManufacturerID" 	: "1024624",
		"ManufacturerCode"	: "GS"
	
	}
	],
	"BitDefender"		:	[
	{
		"ManufacturerID" 	: "1027317",
		"ManufacturerCode"	: "BD",
		"Attributes"		: ["License Term","License Qty"]
	
	}
	],
	"BlackBerry"		:	[
	{
		"ManufacturerID" 	: "1020260",
		"ManufacturerCode"	: "BB",
		"Attributes"		: ["License Qty"]
	
	}
	],
	"BullGuard"		:	[
	{
		"ManufacturerID" 	: "1021383",
		"ManufacturerCode"	: "BG"
	
	}
	],
	"Bussiness Objects"		:	[
	{
		"ManufacturerID" 	: "1024365",
		"ManufacturerCode"	: "BO"
	
	}
	],
	"CA"		:	[
	{
		"ManufacturerID" 	: "10344",
		"ManufacturerCode"	: "CA",
		"Attributes"		: ["Support Term"]
	
	}
	],
	"Canon"		:	[
	{
		"ManufacturerID" 	: "10332",
		"ManufacturerCode"	: "CU"
	
	}
	],
	"Circus Ponies"		:	[
	{
		"ManufacturerID" 	: "1020389",
		"ManufacturerCode"	: "CP"
	
	}
	],
	"Comodo"		:	[
	{
		"ManufacturerID" 	: "1029568",
		"ManufacturerCode"	: "CD"
	
	}
	],
	"Condusiv"		:	[
	{
		"ManufacturerID" 	: "10992",
		"ManufacturerCode"	: "CV"
	
	}
	],
	"Corel"		:	[
	{
		"ManufacturerID" 	: "1016",
		"ManufacturerCode"	: "CO",
		"Attributes"		: ["Support Term"]
	
	}
	],
	"DeLorme"		:	[
	{
		"ManufacturerID" 	: "10367",
		"ManufacturerCode"	: "DL"
	
	}
	],
	"Embarcadero"		:	[
	{
		"ManufacturerID" 	: "1024655",
		"ManufacturerCode"	: "EB"
	
	}
	],
	"EMC Insignia"		:	[
	{
		"ManufacturerID" 	: "1020252",
		"ManufacturerCode"	: "EI"
	
	}
	],
	"Enfocus"		:	[
	{
		"ManufacturerID" 	: "102762",
		"ManufacturerCode"	: "EF"
	
	}
	],
	"ESET"		:	[
	{
		"ManufacturerID" 	: "1023988",
		"ManufacturerCode"	: "ET"
	
	}
	],
	"Filemaker"		:	[
	{
		"ManufacturerID" 	: "10749",
		"ManufacturerCode"	: "FM"
	
	}
	],
	"Final Draft"		:	[
	{
		"ManufacturerID" 	: "1021431",
		"ManufacturerCode"	: "FD"
	
	}
	],
	"Fujitsu"		:	[
	{
		"ManufacturerID" 	: "10387",
		"ManufacturerCode"	: "FJ"
	
	}
	],
	"H&R Block"		:	[
	{
		"ManufacturerID" 	: "1020810",
		"ManufacturerCode"	: "HR"
	
	}
	],
	"Hewlett Packard"		:	[
	{
		"ManufacturerID" 	: "10393",
		"ManufacturerCode"	: "HP"
	
	}
	],
	"Honest Technology"		:	[
	{
		"ManufacturerID" 	: "1021653",
		"ManufacturerCode"	: "HT"
	
	}
	],
	"IBM"		:	[
	{
		"ManufacturerID" 	: "10396",
		"ManufacturerCode"	: "IB"
	
	}
	],
	"IMSI Software"		:	[
	{
		"ManufacturerID" 	: "10398",
		"ManufacturerCode"	: "IM"
	
	}
	],
	"Infinite Skills"		:	[
	{
		"ManufacturerID" 	: "",
		"ManufacturerCode"	: "IF"
	
	}
	],
	"Insperity"		:	[
	{
		"ManufacturerID" 	: "1122614",
		"ManufacturerCode"	: "IY"
	
	}
	],
	"Intego"		:	[
	{
		"ManufacturerID" 	: "102240",
		"ManufacturerCode"	: "IE"	
	}
	],
	"Intuit"		:	[
	{
		"ManufacturerID" 	: "10403",
		"ManufacturerCode"	: "IT"
	
	}
	],
	"Iris"		:	[
	{
		"ManufacturerID" 	: "1021475",
		"ManufacturerCode"	: "IS"
	
	}
	],
	"Kaspersky"		:	[
	{
		"ManufacturerID" 	: "1020989",
		"ManufacturerCode"	: "KA",
		"Attributes"		: ["License Term","License Qty"]
	
	}
	],
	"McAfee"		:	[
	{
		"ManufacturerID" 	: "101150",
		"ManufacturerCode"	: "MC",
		"Attributes"		: ["Support Term"]
	
	}
	],
	"Microsoft"		:	[
	{
		"ManufacturerID" 	: "10291",
		"ManufacturerCode"	: "MS",
		"Attributes"		: ["Media Type"]
	
	}
	],
	"Nero"		:	[
	{
		"ManufacturerID" 	: "1020598",
		"ManufacturerCode"	: "AH"
	
	}
	],
	"Nolo Press"		:	[
	{
		"ManufacturerID" 	: "101046",
		"ManufacturerCode"	: "NL"
	
	}
	],
	"Nuance"		:	[
	{
		"ManufacturerID" 	: "101168",
		"ManufacturerCode"	: "NC"
	
	}
	],
	"OfficeWork"		:	[
	{
		"ManufacturerID" 	: "1023919",
		"ManufacturerCode"	: "OW"
	
	}
	],
	"Open Text"		:	[
	{
		"ManufacturerID" 	: "1020841",
		"ManufacturerCode"	: "OT"
	
	}
	],
	"Oracle"		:	[
	{
		"ManufacturerID" 	: "101730",
		"ManufacturerCode"	: "OR"
	
	}
	],
	"Palo Alto"		:	[
	{
		"ManufacturerID" 	: "1080",
		"ManufacturerCode"	: "PA"
	
	}
	],
	"Paragon"		:	[
	{
		"ManufacturerID" 	: "1023486",
		"ManufacturerCode"	: "PG",
		"Attributes"		: ["License Term"]
	
	}
	],
	"Pentax"		:	[
	{
		"ManufacturerID" 	: "103115",
		"ManufacturerCode"	: "PX"
	
	}
	],
	"Punch!"		:	[
	{
		"ManufacturerID" 	: "10877",
		"ManufacturerCode"	: "PU"
	
	}
	],
	"PremiumSoft"		:	[
	{
		"ManufacturerID" 	: "",
		"ManufacturerCode"	: ""
	
	}
	],
	"ProgeSOFT"		:	[
	{
		"ManufacturerID" 	: "",
		"ManufacturerCode"	: ""
	
	}
	],
	"Quark"		:	[
	{
		"ManufacturerID" 	: "10189",
		"ManufacturerCode"	: "QU"
	
	}
	],
	"Retail"		:	[
	{
		"ManufacturerID" 	: "",
		"ManufacturerCode"	: "RT",
		"Attributes"		: ["License Term","License Qty","Media Type","Support Term"]
	
	}
	],
	"Roxio"		:	[
	{
		"ManufacturerID" 	: "1020273",
		"ManufacturerCode"	: "RX"
	
	}
	],
	"Sage"		:	[
	{
		"ManufacturerID" 	: "1021820",
		"ManufacturerCode"	: "SA"
	
	}
	],
	"SAP"		:	[
	{
		"ManufacturerID" 	: "1024365",
		"ManufacturerCode"	: "BO"
	
	}
	],
	"Serif"		:	[
	{
		"ManufacturerID" 	: "1021820",
		"ManufacturerCode"	: "SF"
	
	}
	],
	"Smith Micro"		:	[
	{
		"ManufacturerID" 	: "10105",
		"ManufacturerCode"	: "SM"
	
	}
	],
	"Sony"		:	[
	{
		"ManufacturerID" 	: "10657",
		"ManufacturerCode"	: "SO"
	
	}
	],
	"Sybase"		:	[
	{
		"ManufacturerID" 	: "10826",
		"ManufacturerCode"	: "SB"
	
	}
	],
	"Symantec"		:	[
	{
		"ManufacturerID" 	: "10219",
		"ManufacturerCode"	: "SY",
		"Attributes"		: ["Support Term"]
	
	}
	],
	"TechSmith"		:	[
	{
		"ManufacturerID" 	: "102957",
		"ManufacturerCode"	: "TS"
	
	}
	],
	"Thomson Reuters"		:	[
	{
		"ManufacturerID" 	: "1036711",
		"ManufacturerCode"	: "TH"
	
	}
	],
	"Toshiba"		:	[
	{
		"ManufacturerID" 	: "102787",
		"ManufacturerCode"	: "TO"
	
	}
	],
	"Total Training"		:	[
	{
		"ManufacturerID" 	: "1020896",
		"ManufacturerCode"	: "TT"
	
	}
	],
	"Trend Micro"		:	[
	{
		"ManufacturerID" 	: "10587",
		"ManufacturerCode"	: "TM"
	
	}
	],
	"TuneUP"		:	[
	{
		"ManufacturerID" 	: "1027529",
		"ManufacturerCode"	: "TU"
	
	}
	],
	"V7"		:	[
	{
		"ManufacturerID" 	: "1020301",
		"ManufacturerCode"	: "V7"
	
	}
	],
	"Veeam"		:	[
	{
		"ManufacturerID" 	: "1026920",
		"ManufacturerCode"	: "VE"
	
	}
	],
	"Vivitar"		:	[
	{
		"ManufacturerID" 	: "10490",
		"ManufacturerCode"	: "VR"
	
	}
	],
	"Vmware"		:	[
	{
		"ManufacturerID" 	: "1020252",
		"ManufacturerCode"	: "VM",
		"Attributes"		: ["Support Term"]
	
	}
	],
	"MakerBot"		:	[
	{
		"ManufacturerID" 	: "1038399",
		"ManufacturerCode"	: "MB"
	
	}
	],
	"Red Hat"		:	[
	{
		"ManufacturerID" 	: "101164",
		"ManufacturerCode"	: "RH"
	
	}
	],
	"SoftwareMedia"		:	[
	{
		"ManufacturerID" 	: "",
		"ManufacturerCode"	: "SZ"
	}
	]
};

document.observe("dom:loaded", function() {
	//If on edit page, add observer to brand and part number
	if ($('cpc_price') != undefined) {
		$('cpc_price').disable();
		$('brand').observe('change', updateSKU);
		$('brand').observe('change', updateAttributes);
		$('manufacturer_pn_2').observe('change', updateSKU);
		$('manufacturer_pn_2').observe('keyup', updateSKU);
	}
	
	//If on create page, populate dropdown with brands
	if ($('product_group') != undefined) {
		$('product_group').observe('change', updateGroup);
		$('product_group').insert(new Element('option', {value: ''}).update('All'));
		Object.keys(manufacturerList).forEach(function (key) {
			var count = 0;
			$$('.form-list .value input').each(function(e){
				e.checked = false;
			});
			
			$$('.form-list .label label').each(function(e){
				if (e.innerHTML.substr(0,2) != manufacturerList[key][0].ManufacturerCode) {
					if (manufacturerList[key][0].Attributes) {
						if (manufacturerList[key][0].Attributes.indexOf(e.innerHTML) >= 0)
							count++
					}
				} else {
					count++;
				}		
			});
			if (count >0)
				$('product_group').insert(new Element('option', {value: key}).update(key));
		});
	}
	$$('#group_fields207 .form-list tbody').first().insert({top: "<tr><td class=\"label\"><button id=\"hidden_button\"><span>Show All Hidden</span></button></td></tr>"});
	
	$('hidden_button').observe('click', function(event) { 
		$$('#group_fields207 .label label').each(function(e){
			e.up().up().show();
		});
	});
	updateAttributes();
   // do something with obj[key]
});
function updateAttributes() {
	var group = $('brand')[$('brand').selectedIndex].text;

	$$('#group_fields207 .label label').each(function(e){
		e.up().up().show();
		if (group == "All") 
			return;
			
		if (e.innerHTML.substr(0,2) != manufacturerList[group][0].ManufacturerCode) {
			if (manufacturerList[group][0].Attributes) {
				if (manufacturerList[group][0].Attributes.indexOf(e.innerHTML) < 0)
					e.up().up().hide();
			} else {
				e.up().up().hide();
			}
				
			//e.update(e.innerHTML.substr(0,2) + ' ' + manufacturerList[group][0].ManufacturerCode);
		}
	})
}
function updateGroup() {
	var group = $('product_group')[$('product_group').selectedIndex].text;

	$$('.form-list .label label').each(function(e){
		e.up().up().show();
		if (group == "All") 
			return;
			
		if (e.innerHTML.substr(0,2) != manufacturerList[group][0].ManufacturerCode) {
			if (manufacturerList[group][0].Attributes) {
				if (manufacturerList[group][0].Attributes.indexOf(e.innerHTML) < 0)
					e.up().up().hide();
			} else {
				e.up().up().hide();
			}
				
			//e.update(e.innerHTML.substr(0,2) + ' ' + manufacturerList[group][0].ManufacturerCode);
		}
	})
}
function updateSKU() {
	var brand = $('brand')[$('brand').selectedIndex].text;
	var manufacturerNum = $('manufacturer_pn_2').value.replace(/[^a-zA-Z0-9]/g,'');
	if (manufacturerList[brand] != undefined) {
		$('etilize_manufactureid').value = manufacturerList[brand][0].ManufacturerID;
		if (manufacturerList[brand]) {
			$('sku').value = manufacturerList[brand][0].ManufacturerCode + '-' + manufacturerNum;	
			}
	}
	
}